!function(e){var t={};function n(o){if(t[o])return t[o].exports;var a=t[o]={i:o,l:!1,exports:{}};return e[o].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(o,a,function(t){return e[t]}.bind(null,a));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";function o(e,t,n){let o=e.getContext("2d"),a=window.innerWidth,s=window.innerHeight;Math.max(a/t,s/n);var r=Math.min(a/t,s/n);e.style.width=a+"px",e.style.height=s+"px",e.width=a,e.height=s;let i=a/2-t/2*r,f=s/2-n/2*r;return o.setTransform(r,0,0,r,i,f),{canvas:e,nativeWidth:t,nativeHeight:n}}n.r(t);Math.PI;function a(...e){if(4==e.length)return function(e,t,n,o){let a=n-e,s=o-t;return Math.sqrt(a**2+s**2)}(...e);if(2==e.length)return function(e,t){let n=t.x-e.x,o=t.y-e.y;return Math.sqrt(n**2+o**2)}(...e);throw"ERROR: Pass 4 numbers for cordinates or 2 objects with x,y props"}const s=e=>e*Math.PI/180;function r(e){return e.toUpperCase().charCodeAt(0)-46}function i(e,t,n,o,a=1,s="text_spritesheet.png"){let i=new Image;i.src=`./assets/${s}`;let f=e.getContext("2d");f.save(),f.scale(a,a);let c=function(e){return e.split("").map(r)}(t);for(let e=0;e<c.length;e++){const t=c[e];f.drawImage(i,16*t,0,16,16,n+16*e,o/a,16,16)}f.restore()}function f(e){e.forEach(e=>{!function(e){if(!e.alive)return;const t=e.state.canvas.getContext("2d");t.save(),t.imageSmoothingEnabled=!1;const{x:n,y:o,rotation:a}=e,s=n+1.5,r=o+.5;t.save(),t.translate(s,r),t.rotate(Math.PI/180*a),t.translate(-s,-r),t.drawImage(e.img,24,0,1,16,n,o,8,3),t.restore()}(e)})}function c(e){e.alive?(e.x+=Math.cos(s(e.rotation))*(e.dx*e.state.maxImpulse+1),e.y+=Math.sin(s(e.rotation))*(e.dy*e.state.maxImpulse+1),e.x>=e.state.nativeWidth-8&&(e.x=e.state.nativeWidth-8,e.alive=!1),e.x<=0&&(e.x=0,e.alive=!1),e.y>=e.state.nativeHeight-8&&(e.y=e.state.nativeHeight-8,e.alive=!1),e.y<=0&&(e.y=0,e.alive=!1)):e=null}function _(e,t,n,o="spritesheet.png"){let a=new Image;a.src=`./assets/${o}`;return{state:e,x:t,y:n,rotation:0,img:a}}function u(e,t,n,o,a){return{...e,dx:t,dy:n,type:o,radius:a,rotation:Math.floor(360*Math.random()),innerRotation:0,alive:!0}}function l(e){e.forEach(e=>{!function(e){if(!e.alive)return;const{state:t}=e;e.state.bullets.forEach(t=>{a(e,t)<=16&&(e.alive=!1)}),e.innerRotation-=2,e.x+=Math.cos(s(e.rotation))*(1*e.dx),e.y+=Math.sin(s(e.rotation))*(1*e.dy),e.x>=t.nativeWidth-32&&(e.x=t.nativeWidth-32,e.dx*=-1),e.x<=0&&(e.x=0,e.dx*=-1),e.y>=t.nativeHeight-32&&(e.y=t.nativeHeight-32,e.dy*=-1),e.y<=0&&(e.y=0,e.dy*=-1)}(e)})}function d(e){e.forEach(e=>{!function(e){const t=e.state.canvas.getContext("2d");t.save(),t.imageSmoothingEnabled=!1;const{x:n,y:o,innerRotation:a,type:s}=e,r=n+16,i=o+16;switch(t.save(),t.translate(r,i),t.rotate(Math.PI/180*a),t.translate(-r,-i),s){case"methane":t.drawImage(e.img,80,0,16,16,n,o,16,16),t.drawImage(e.img,96,0,16,16,n+16,o,16,16),t.drawImage(e.img,112,0,16,16,n,o+16,16,16),t.drawImage(e.img,128,0,16,16,n+16,o+16,16,16);break;case"dioxide":t.drawImage(e.img,144,0,16,16,n,o,16,16),t.drawImage(e.img,160,0,16,16,n+16,o,16,16),t.drawImage(e.img,176,0,16,16,n,o+16,16,16),t.drawImage(e.img,192,0,16,16,n+16,o+16,16,16)}t.restore()}(e)})}var v=2,m=33,h=null;function x(e){return Math.sin(6.283184*e)}var g=[x,function(e){return x(e)<0?-1:1},function(e){return e%1-.5},function(e){var t=e%1*4;return t<2?t-1:3-t}];function p(e){return.00390625*Math.pow(1.059463094,e-128)}function w(e,t){setTimeout(function(){var n=new Uint8Array(e*v*2),o=n.length-2,a=function(){for(var e=new Date,s=0;o>=0;)if(n[o]=0,n[o+1]=128,o-=2,(s+=1)%1e3==0&&new Date-e>m)return void setTimeout(a,0);setTimeout(function(){t(n)},0)};setTimeout(a,0)},0)}function y(e,t,n,o,a){var s=n.fx_delay_time*o>>1,r=n.fx_delay_amt/255,i=0,f=function(){for(var n=new Date,o=0;i<t-s;){var c=4*i,_=4*(i+s),u=e[_]+(e[_+1]<<8)+(e[c+2]+(e[c+3]<<8)-32768)*r;if(e[_]=255&u,e[_+1]=u>>8&255,u=e[_+2]+(e[_+3]<<8)+(e[c]+(e[c+1]<<8)-32768)*r,e[_+2]=255&u,e[_+3]=u>>8&255,++i,(o+=1)%1e3==0&&new Date-n>m)return void setTimeout(f,0)}setTimeout(a,0)};setTimeout(f,0)}var q=function(e){this.mixBuf=e,this.waveSize=e.length/v/2};q.prototype.getWave=function(){var e,t,n,o,a,s,r,i=this.mixBuf,f=this.waveSize*v*2;for(s=(a=f-8)-36,o=String.fromCharCode(82,73,70,70,255&a,a>>8&255,a>>16&255,a>>24&255,87,65,86,69,102,109,116,32,16,0,0,0,1,0,2,0,68,172,0,0,16,177,2,0,4,0,16,0,100,97,116,97,255&s,s>>8&255,s>>16&255,s>>24&255),e=0;e<f;){for(n="",t=0;t<256&&e<f;++t,e+=2)r=(r=4*(i[e]+(i[e+1]<<8)-32768))<-32768?-32768:r>32767?32767:r,n+=String.fromCharCode(255&r,r>>8&255);o+=n}return o},q.prototype.getAudio=function(){var e=this.getWave(),t=new Audio("data:audio/wav;base64,"+btoa(e));return t.preload="none",t.load(),t},q.prototype.getAudioBuffer=function(e){null===h&&(h=new AudioContext);var t=this.mixBuf,n=this.waveSize,o=h.createBuffer(v,this.waveSize,44100),a=o.getChannelData(0),s=o.getChannelData(1),r=0,i=function(){for(var f=new Date,c=0;r<n;){var _=4*(t[4*r]+(t[4*r+1]<<8)-32768);if(_=_<-32768?-32768:_>32767?32767:_,a[r]=_/32768,_=(_=4*(t[4*r+2]+(t[4*r+3]<<8)-32768))<-32768?-32768:_>32767?32767:_,s[r]=_/32768,r+=1,(c+=1)%1e3==0&&new Date-f>m)return void setTimeout(i,0)}setTimeout(function(){e(o)},0)};setTimeout(i,0)};var b=function(e,t){this.instr=e,this.rowLen=t||5605,this.osc_lfo=g[e.lfo_waveform],this.osc1=g[e.osc1_waveform],this.osc2=g[e.osc2_waveform],this.attack=e.env_attack,this.sustain=e.env_sustain,this.release=e.env_release,this.panFreq=Math.pow(2,e.fx_pan_freq-8)/this.rowLen,this.lfoFreq=Math.pow(2,e.lfo_freq-8)/this.rowLen};b.prototype.genSound=function(e,t,n){new Date;for(var o=0,a=0,s=p(e+12*(this.instr.osc1_oct-8)+this.instr.osc1_det)*(1+8e-4*this.instr.osc1_detune),r=p(e+12*(this.instr.osc2_oct-8)+this.instr.osc2_det)*(1+8e-4*this.instr.osc2_detune),i=this.instr.fx_resonance/255,f=0,c=0,_=this.attack+this.sustain+this.release-1;_>=0;--_){var u=_+n,l=this.osc_lfo(u*this.lfoFreq)*this.instr.lfo_amt/512+.5,d=1;_<this.attack?d=_/this.attack:_>=this.attack+this.sustain&&(d-=(_-this.attack-this.sustain)/this.release);var v=s;this.instr.lfo_osc1_freq&&(v+=l),this.instr.osc1_xenv&&(v*=d*d),o+=v;var m=this.osc1(o)*this.instr.osc1_vol;v=r,this.instr.osc2_xenv&&(v*=d*d),a+=v,m+=this.osc2(a)*this.instr.osc2_vol,this.instr.noise_fader&&(m+=(2*Math.random()-1)*this.instr.noise_fader*d),m*=d/255;var h=this.instr.fx_freq;this.instr.lfo_fx_freq&&(h*=l);var g=i*(m-c)-(f+=(h=1.5*Math.sin(3.141592*h/44100))*c);switch(c+=h*g,this.instr.fx_filter){case 1:m=g;break;case 2:m=f;break;case 3:m=c;break;case 4:m=f+g}if(v=x(u*this.panFreq)*this.instr.fx_pan_amt/512+.5,m*=39*this.instr.env_master,(u*=4)+3<t.length){var w=t[u]+(t[u+1]<<8)+m*(1-v);t[u]=255&w,t[u+1]=w>>8&255,w=t[u+2]+(t[u+3]<<8)+m*v,t[u+2]=255&w,t[u+3]=w>>8&255}}},b.prototype.getAudioGenerator=function(e,t){var n=this.attack+this.sustain+this.release-1+32*this.rowLen,o=this;w(n,function(a){o.genSound(e,a,0),y(a,n,o.instr,o.rowLen,function(){t(new q(a))})})},b.prototype.createAudio=function(e,t){this.getAudioGenerator(e,function(e){t(e.getAudio())})},b.prototype.createAudioBuffer=function(e,t){this.getAudioGenerator(e,function(e){e.getAudioBuffer(t)})};var k=function(e){this.song=e,this.waveSize=44100*e.songLen};let I,M;k.prototype.generateTrack=function(e,t,n){var o=this;w(this.waveSize,function(a){var s=o.waveSize,r=o.waveSize*v*2,i=o.song.rowLen,f=o.song.endPattern,c=new b(e,i),_=0,u=0,l=0,d=function(){for(var t=new Date;;)if(32!==l){if(u===f-1)return void setTimeout(h,0);var n=e.p[u];if(n){var o=e.c[n-1].n[l];o&&c.genSound(o,a,_)}if(_+=i,l+=1,new Date-t>m)return void setTimeout(d,0)}else l=0,u+=1},h=function(){y(a,s,e,i,g)},x=0,g=function(){for(var e=new Date,o=0;x<r;){var s=t[x]+(t[x+1]<<8)+a[x]+(a[x+1]<<8)-32768;if(t[x]=255&s,t[x+1]=s>>8&255,x+=2,(o+=1)%1e3==0&&new Date-e>m)return void setTimeout(g,0)}setTimeout(n,0)};setTimeout(d,0)})},k.prototype.getAudioGenerator=function(e){var t=this;w(this.waveSize,function(n){var o=0,a=function(){o<t.song.songData.length?(o+=1,t.generateTrack(t.song.songData[o-1],n,a)):e(new q(n))};a()})},k.prototype.createAudio=function(e){this.getAudioGenerator(function(t){e(t.getAudio())})},k.prototype.createAudioBuffer=function(e){this.getAudioGenerator(function(t){t.getAudioBuffer(e)})};let S=!1;n.d(t,"fire",function(){return J}),document.getElementById("testbtn").addEventListener("click",()=>{!function(){let e=new k({songLen:37,songData:[{osc1_oct:7,osc1_det:0,osc1_detune:0,osc1_xenv:0,osc1_vol:192,osc1_waveform:3,osc2_oct:7,osc2_det:0,osc2_detune:7,osc2_xenv:0,osc2_vol:201,osc2_waveform:3,noise_fader:0,env_attack:789,env_sustain:1234,env_release:13636,env_master:191,fx_filter:2,fx_freq:5839,fx_resonance:254,fx_delay_time:6,fx_delay_amt:121,fx_pan_freq:6,fx_pan_amt:147,lfo_osc1_freq:0,lfo_fx_freq:1,lfo_freq:6,lfo_amt:195,lfo_waveform:0,p:[1,2,0,0,1,2,1,2],c:[{n:[154,0,154,0,152,0,147,0,0,0,0,0,0,0,0,0,154,0,154,0,152,0,157,0,0,0,156,0,0,0,0,0]},{n:[154,0,154,0,152,0,147,0,0,0,0,0,0,0,0,0,154,0,154,0,152,0,157,0,0,0,159,0,0,0,0,0]}]},{osc1_oct:7,osc1_det:0,osc1_detune:0,osc1_xenv:0,osc1_vol:255,osc1_waveform:2,osc2_oct:8,osc2_det:0,osc2_detune:18,osc2_xenv:1,osc2_vol:191,osc2_waveform:2,noise_fader:0,env_attack:3997,env_sustain:56363,env_release:1e5,env_master:255,fx_filter:2,fx_freq:392,fx_resonance:255,fx_delay_time:8,fx_delay_amt:69,fx_pan_freq:5,fx_pan_amt:67,lfo_osc1_freq:0,lfo_fx_freq:1,lfo_freq:4,lfo_amt:57,lfo_waveform:3,p:[1,2,1,2,1,2,1,2],c:[{n:[130,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[123,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}]},{osc1_oct:8,osc1_det:0,osc1_detune:0,osc1_xenv:0,osc1_vol:0,osc1_waveform:0,osc2_oct:8,osc2_det:0,osc2_detune:0,osc2_xenv:0,osc2_vol:0,osc2_waveform:0,noise_fader:60,env_attack:50,env_sustain:419,env_release:4607,env_master:130,fx_filter:1,fx_freq:10332,fx_resonance:120,fx_delay_time:4,fx_delay_amt:16,fx_pan_freq:5,fx_pan_amt:108,lfo_osc1_freq:0,lfo_fx_freq:0,lfo_freq:5,lfo_amt:187,lfo_waveform:0,p:[0,0,0,0,1,1],c:[{n:[0,0,147,0,0,0,147,147,0,0,147,0,0,147,0,147,0,0,147,0,0,0,147,147,0,0,147,0,0,147,0,147]}]},{osc1_oct:7,osc1_det:0,osc1_detune:0,osc1_xenv:1,osc1_vol:255,osc1_waveform:0,osc2_oct:7,osc2_det:0,osc2_detune:0,osc2_xenv:1,osc2_vol:255,osc2_waveform:0,noise_fader:0,env_attack:50,env_sustain:150,env_release:4800,env_master:200,fx_filter:2,fx_freq:600,fx_resonance:254,fx_delay_time:0,fx_delay_amt:0,fx_pan_freq:0,fx_pan_amt:0,lfo_osc1_freq:0,lfo_fx_freq:0,lfo_freq:0,lfo_amt:0,lfo_waveform:0,p:[1,1,1,1,1,1],c:[{n:[147,0,0,0,0,0,0,0,147,0,0,0,0,0,0,0,147,0,0,0,0,0,0,0,147,0,0,0,0,0,0,0]}]},{osc1_oct:7,osc1_det:0,osc1_detune:0,osc1_xenv:0,osc1_vol:255,osc1_waveform:2,osc2_oct:7,osc2_det:0,osc2_detune:9,osc2_xenv:0,osc2_vol:154,osc2_waveform:2,noise_fader:0,env_attack:2418,env_sustain:1075,env_release:10614,env_master:240,fx_filter:3,fx_freq:2962,fx_resonance:255,fx_delay_time:6,fx_delay_amt:117,fx_pan_freq:3,fx_pan_amt:73,lfo_osc1_freq:0,lfo_fx_freq:1,lfo_freq:5,lfo_amt:124,lfo_waveform:0,p:[0,0,0,0,1,2,1,2],c:[{n:[154,0,154,0,152,0,147,0,0,0,0,0,0,0,0,0,154,0,154,0,152,0,157,0,0,0,156,0,0,0,0,0]},{n:[154,0,154,0,152,0,147,0,0,0,0,0,0,0,0,0,154,0,147,0,152,0,157,0,0,0,159,0,0,0,0,0]}]},{osc1_oct:7,osc1_det:0,osc1_detune:0,osc1_xenv:0,osc1_vol:192,osc1_waveform:1,osc2_oct:6,osc2_det:0,osc2_detune:9,osc2_xenv:0,osc2_vol:192,osc2_waveform:1,noise_fader:0,env_attack:137,env_sustain:2e3,env_release:4611,env_master:192,fx_filter:1,fx_freq:982,fx_resonance:89,fx_delay_time:6,fx_delay_amt:25,fx_pan_freq:6,fx_pan_amt:77,lfo_osc1_freq:0,lfo_fx_freq:1,lfo_freq:3,lfo_amt:69,lfo_waveform:0,p:[1,2,1,3,1,3],c:[{n:[130,0,130,0,142,0,130,130,0,142,130,0,142,0,130,0,130,0,130,0,142,0,130,130,0,142,130,0,142,0,130,0]},{n:[123,0,123,0,135,0,123,123,0,135,123,0,135,0,123,0,123,0,123,0,135,0,123,123,0,135,123,0,135,0,123,0]},{n:[135,0,135,0,147,0,135,135,0,147,135,0,147,0,135,0,135,0,135,0,147,0,135,135,0,147,135,0,147,0,135,0]}]},{osc1_oct:7,osc1_det:0,osc1_detune:0,osc1_xenv:0,osc1_vol:255,osc1_waveform:3,osc2_oct:8,osc2_det:0,osc2_detune:0,osc2_xenv:0,osc2_vol:255,osc2_waveform:0,noise_fader:127,env_attack:22,env_sustain:88,env_release:3997,env_master:255,fx_filter:3,fx_freq:4067,fx_resonance:234,fx_delay_time:4,fx_delay_amt:33,fx_pan_freq:2,fx_pan_amt:84,lfo_osc1_freq:0,lfo_fx_freq:1,lfo_freq:3,lfo_amt:28,lfo_waveform:0,p:[0,0,1,2,1,2,1,3],c:[{n:[0,0,142,0,154,0,0,0,142,0,0,0,154,0,0,0,0,0,142,0,154,0,0,0,142,0,0,0,154,0,0,0]},{n:[0,0,147,0,154,0,0,0,147,0,0,0,154,0,0,0,0,0,147,0,154,0,147,0,0,0,154,0,0,0,154,0]},{n:[0,0,147,0,154,0,0,0,147,0,0,0,154,0,0,0,0,0,147,0,154,0,0,0,147,0,0,0,0,0,0,0]}]},{osc1_oct:8,osc1_det:0,osc1_detune:0,osc1_xenv:0,osc1_vol:0,osc1_waveform:0,osc2_oct:8,osc2_det:0,osc2_detune:0,osc2_xenv:0,osc2_vol:0,osc2_waveform:0,noise_fader:255,env_attack:140347,env_sustain:9216,env_release:133417,env_master:208,fx_filter:2,fx_freq:2500,fx_resonance:16,fx_delay_time:2,fx_delay_amt:157,fx_pan_freq:8,fx_pan_amt:207,lfo_osc1_freq:0,lfo_fx_freq:1,lfo_freq:2,lfo_amt:51,lfo_waveform:0,p:[0,0,1,1,1,1,1,1],c:[{n:[147,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}]}],rowLen:5513,endPattern:9});I=new AudioContext,console.log("loading sound..."),e.createAudioBuffer(function(e){(M=I.createBufferSource()).buffer=e,M.connect(I.destination),I.suspend(),S=!0})}()});const A=document.getElementsByTagName("canvas")[0],C=A.getContext("2d");let T,D=!1,L=!1,E=(new Date).getTime();const W=E,G=6e4;let R,H=6e4,B=!1;const P={...o(A,640,360),molecules:[],bullets:[],impulse:0,maxImpulse:2,oxygenCurrent:0,oxygenGoal:5,shootDelay:200};o(A,P.nativeWidth,P.nativeHeight),window.addEventListener("resize",()=>{o(A,P.nativeWidth,P.nativeHeight)}),window.addEventListener("gamepadconnected",e=>{console.log("Gamepad connected at index %d: %s. %d buttons, %d axes.",e.gamepad.index,e.gamepad.id,e.gamepad.buttons.length,e.gamepad.axes.length),B=!0});const z=function(e,t,n,o=!1,a=!1){return{...e,dx:t,dy:n,turnLeft:o,turnRight:a,alive:!0}}(_(P,P.nativeWidth/2,P.nativeHeight/2),2,2);const O=(j=_(P,16,8),F=P.oxygenGoal,U=P.oxygenCurrent,{...j,current:F,goal:U});var j,F,U;const $=function(e,t,n){return{...e,impulse:t,maxImpulse:n}}(_(P,525,8),P.impulse,P.maxImpulse);var N;function J(e,t){if(t.state.shootDelay<=0){const n=function(e,t,n,o){return{...e,rotation:o,dx:t,dy:n,alive:!0}}(_(t.state,t.x+5,t.y+6),2,2,t.rotation);e.push(n),t.state.shootDelay=200}}N=z,window.addEventListener("keydown",e=>{const t=e.keyCode;switch(t){case 39:N.turnRight=!0;break;case 37:N.turnLeft=!0;break;case 32:J(P.bullets,N)}38==t&&(D=!0),40==t&&(L=!0)}),window.addEventListener("keyup",e=>{const t=e.keyCode;switch(t){case 39:N.turnRight=!1;break;case 37:N.turnLeft=!1}38==t&&(D=!1),40==t&&(L=!1)}),window.addEventListener("gamepadconnected",e=>{const t=navigator.getGamepads()[e.gamepad.index];!function(...e){window.LOGGER&&console.log(...e)}("Gamepad connected at index %d: %s. %d buttons, %d axes.",t.index,t.id,t.buttons.length,t.axes.length)}),function(e,t){for(let n=0;n<t;n++){const t=_(e,Math.random()*e.nativeWidth,Math.random()*e.nativeHeight);e.molecules.push(u(t,1,1,Math.random()>=.5?"methane":"dioxide",16))}}(P,5),function e(){if(requestAnimationFrame(e),C.clearRect(0,-0,P.nativeWidth,P.nativeHeight),P.shootDelay-=15,(T=(new Date).getTime())-E>=1e3&&(H=G-(T-W),E=T),B){const e=(R=navigator.getGamepads())[0],t=e.buttons[14],n=e.buttons[15],o=e.buttons[12],a=e.buttons[13],s=e.buttons[0];t.pressed?z.turnLeft=!0:z.turnLeft=!1,n.pressed?z.turnRight=!0:z.turnRight=!1,D=!!o.pressed,L=!!a.pressed,s.pressed&&J(P.bullets,z)}var t,n,o;!function(e){e.alive&&(e.state.molecules.forEach(t=>{a(e,t)<=16&&(e.alive=!1)}),e.turnRight?e.rotation=e.rotation<360?e.rotation+=2:e.rotation=0:e.turnLeft&&(e.rotation=e.rotation>0?e.rotation-=2:e.rotation=360),e.x+=Math.cos(s(e.rotation))*(e.dx*e.state.impulse),e.y+=Math.sin(s(e.rotation))*(e.dy*e.state.impulse),e.x>=e.state.nativeWidth-16&&(e.x=e.state.nativeWidth-16),e.x<=0&&(e.x=0),e.y>=e.state.nativeHeight-16&&(e.y=e.state.nativeHeight-16),e.y<=0&&(e.y=0))}(z),function(e){if(!e.alive)return;const t=e.state.canvas.getContext("2d");t.save(),t.imageSmoothingEnabled=!1;const{x:n,y:o,rotation:a}=e,s=n+8,r=o+8;t.save(),t.translate(s,r),t.rotate(Math.PI/180*a),t.translate(-s,-r),t.drawImage(e.img,0,0,16,16,n,o,16,16),t.restore()}(z),function(e){let t=e.filter(e=>e.alive);for(let e=0;e<t.length;e++){c(t[e])}e=t}(P.bullets),f(P.bullets),l(P.molecules),d(P.molecules),i(P.canvas,(t=H,n=Math.floor(t/6e4),o=(t%6e4/1e3).toFixed(0),n+":"+(o<10?"0":"")+o),P.nativeWidth/2-48,8,1),function(e){const t=e.state.canvas.getContext("2d");t.save(),t.imageSmoothingEnabled=!1;const{x:n,y:o}=e;t.save(),t.drawImage(e.img,24,0,1,16,n,o,100,16),t.drawImage(e.img,38,0,1,16,n,o,100*e.state.oxygenCurrent/e.state.oxygenGoal,16),i(e.state.canvas,"oxygen",n+220,o+4,.5),t.restore()}(O),function(e){const t=e.state.canvas.getContext("2d");t.save(),t.imageSmoothingEnabled=!1;const{x:n,y:o}=e;t.save(),t.drawImage(e.img,24,0,1,16,n,o,100,16),t.drawImage(e.img,54,0,1,16,n,o,100*e.state.impulse/e.state.maxImpulse,16),i(e.state.canvas,"impulse",n+408,o+4,.5),t.restore()}($),D&&(P.impulse+=.02,P.impulse>=P.maxImpulse&&(P.impulse=P.maxImpulse)),L&&(P.impulse*=.98,P.impulse<=0&&(P.impulse=0)),C.save(),C.lineWidth=1,C.strokeStyle="purple",C.strokeRect(0,0,P.nativeWidth,P.nativeHeight),C.restore()}()}]);
//# sourceMappingURL=bundle.js.map